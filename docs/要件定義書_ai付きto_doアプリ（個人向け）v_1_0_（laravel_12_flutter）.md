# è¦ä»¶å®šç¾©æ›¸ â€” AIä»˜ãToâ€‘Doã‚¢ãƒ—ãƒªï¼ˆå€‹äººå‘ã‘ï¼‰v1.0
ä½œæˆæ—¥: 2025-09-18  / æƒ³å®šãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ : iOS/Androidï¼ˆFlutterï¼‰ã€Webï¼ˆå°†æ¥ï¼‰  / ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰: **Laravel 12** + MySQL/Redis

> ç›®çš„: ã€Œã‚„ã‚‹æ°—ãŒãªã„ãƒ»å…ˆå»¶ã°ã—ã€ã‚’æ¸›ã‚‰ã—ã€**2ã‚¯ãƒªãƒƒã‚¯ã§é–‹å§‹**ã§ãã‚‹å®Ÿè¡Œé‡è¦–ã®Toâ€‘Doã€‚AIãŒâ€œä»Šæ—¥ã‚„ã‚‹3ã¤â€ã‚’ææ¡ˆã—ã€**å°ã•ãå§‹ã‚ã‚‹**ã‚’æ”¯æ´ã™ã‚‹ã€‚

---

## 0. ç”¨èª / è¨˜æ³•
- **Task**: 1ã¤ã®ã‚„ã‚‹ã“ã¨ã€‚
- **Subtask**: Taskã®åˆ†å‰²ã‚¹ãƒ†ãƒƒãƒ—ã€‚
- **Session**: é›†ä¸­å®Ÿè¡Œã®1ã‚»ãƒƒãƒˆï¼ˆPomodoroãªã©ï¼‰ã€‚
- **Nudge**: æ–‡è„ˆã«å¿œã˜ãŸçŸ­ã„ä¿ƒã—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€‚
- **Top3**: ä»Šæ—¥ã®æœ€é‡è¦3ä»¶ã€‚
- **AI Coach**: ãƒãƒ£ãƒƒãƒˆé¢¨ã®ã‚³ãƒ¼ãƒæ©Ÿèƒ½ã€‚

---

## 1. èƒŒæ™¯ãƒ»èª²é¡Œãƒ»ã‚´ãƒ¼ãƒ«
### 1.1 èª²é¡Œ
- å…ˆå»¶ã°ã—ãƒ»ã‚„ã‚‹æ°—ä¸è¶³ã§ç€æ‰‹ã§ããªã„ã€‚
- äºˆå®šãŒå¤šãå„ªå…ˆåº¦ãŒã¶ã‚Œã‚‹ã€‚
- ã‚„ã‚‹ã“ã¨ãŒå¤§ããæ›–æ˜§ã§ã€**æœ€åˆã®ä¸€æ­©**ãŒåˆ†ã‹ã‚‰ãªã„ã€‚

### 1.2 ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚´ãƒ¼ãƒ«
- **æ‘©æ“¦æœ€å°åŒ–**: 2ã‚¯ãƒªãƒƒã‚¯ã§Focusé–‹å§‹ã€‚
- **è¡Œå‹•ã®ç´°åˆ†åŒ–**: AIãŒ20â€“30åˆ†ç²’åº¦ã«è‡ªå‹•ãƒ–ãƒ¬ã‚¤ã‚¯ãƒ€ã‚¦ãƒ³ã€‚
- **å½“æ—¥æœ€é©åŒ–**: ã‚¨ãƒãƒ«ã‚®ãƒ¼/äºˆå®š/ç· åˆ‡ã‹ã‚‰**Top3**ã‚’AIãŒææ¡ˆã€‚
- **ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³**: 1åˆ†æ—¥æ¬¡ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§æ”¹å–„ã‚µã‚¤ã‚¯ãƒ«ã€‚

### 1.3 æˆåŠŸæŒ‡æ¨™ï¼ˆMVPï¼‰
- D7ç¶™ç¶šç‡ â‰¥ 35%
- 1æ—¥å¹³å‡**Deepâ€‘work**ï¼ˆé›†ä¸­åˆ†ï¼‰â‰¥ 45åˆ†
- 1æ—¥**é–‹å§‹ã¾ã§ã®å¹³å‡ã‚¿ãƒƒãƒ—æ•°** â‰¤ 2.0
- é€±ã‚ãŸã‚Š**Top3å®Œäº†ç‡** â‰¥ 60%

---

## 2. ã‚¹ã‚³ãƒ¼ãƒ—
### 2.1 MVPã«å«ã‚€
- ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ/èªè¨¼ï¼ˆãƒ¡ãƒ¼ãƒ« + Apple/Googleï¼‰
- Onboardingï¼ˆç›®æ¨™/ç©ºãæ™‚é–“/é€šçŸ¥ï¼‰
- Home: **Today**ï¼ˆTop3ã€é€²æ—ãƒªãƒ³ã‚°ã€Start Focusï¼‰
- Add/Edit Task + **AIã§åˆ†å‰²**
- Focus Modeï¼ˆPomodoroã€ãƒ›ãƒ¯ã‚¤ãƒˆãƒã‚¤ã‚ºã€è©°ã¾ã£ãŸâ†’ãƒ’ãƒ³ãƒˆï¼‰
- Calendarï¼ˆãƒ‰ãƒ©ãƒƒã‚°ã§æ™‚é–“ãƒ–ãƒ­ãƒƒã‚¯ï¼‰
- Stats/Streakï¼ˆé€±/æœˆï¼‰
- AI Coachï¼ˆãƒ—ãƒªã‚»ãƒƒãƒˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ + çŸ­ã„ä¼šè©±ï¼‰
- æ—¥æ¬¡AMãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³/PMãƒ¬ãƒ“ãƒ¥ãƒ¼
- Pushé€šçŸ¥ï¼ˆé–‹å§‹ä¿ƒã—ã€ä¼‘æ†©ä¿ƒã—ã€æŒ¯ã‚Šè¿”ã‚Šï¼‰

### 2.2 ä»¥é™ï¼ˆæ‹¡å¼µï¼‰
- ãƒ¡ãƒ¼ãƒ«/Drive/ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è‡ªå‹•å–ã‚Šè¾¼ã¿Inbox
- Webç‰ˆã€ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã€Apple Watch/Android Wear
- å…±æœ‰/ã‚³ãƒ©ãƒœï¼ˆå€‹äººâ†’æœ€å°ã®å…±æœ‰ã¸ï¼‰

---

## 3. ãƒšãƒ«ã‚½ãƒŠï¼ˆä»£è¡¨ï¼‰
- **å­¦ç”Ÿ/è‹¥æ‰‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢**: è‡ªä¸»å­¦ç¿’ã‚„èª²é¡Œã®å…ˆå»¶ã°ã—ã§å›°ã‚‹ã€‚
- **å€‹äººé–‹ç™ºè€…**: æœ¬æ¥­å¾Œã®å‰¯æ¥­/å­¦ç¿’ã‚’ç¶™ç¶šã—ãŸã„ã€‚

---

## 4. ä¸»è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼
1) Onboardingï¼ˆ2åˆ†ï¼‰â†’ ç›®æ¨™/ç©ºãæ™‚é–“/é€šçŸ¥ â†’ Home
2) æœã®ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ â†’ AIãŒ**ä»Šæ—¥ã®Top3**ã‚’ææ¡ˆ â†’ 1ä»¶é¸ã‚“ã§**Start Focus**
3) å®Ÿè¡Œä¸­: è©°ã¾ã£ãŸâ†’**60ç§’ãƒ’ãƒ³ãƒˆ**ï¼ˆNudge/Coachï¼‰
4) å¤œã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ â†’ æˆæœ/é˜»å®³è¦å›  â†’ æ˜æ—¥æ¡ˆã®æç¤º

---

## 5. ç”»é¢ä¸€è¦§ & ä»•æ§˜ï¼ˆMVPï¼‰
### 5.1 Welcome/Onboarding
- å…¥åŠ›: ç›®æ¨™ã‚«ãƒ†ã‚´ãƒªï¼ˆå­¦ç¿’/ä»•äº‹/å¥åº·ï¼‰ã€å¹³æ—¥ã®ç©ºãæ™‚é–“å¸¯ã€é€šçŸ¥è¨±è«¾ã€‚
- å‡ºåŠ›: åˆæœŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆTaskã€Top3ã‚¹ãƒ­ãƒƒãƒˆç”Ÿæˆã€‚
- æ¤œè¨¼: å¿…é ˆé …ç›®ä¸è¶³æ™‚ã¯CTAéæ´»æ€§ã€‚

### 5.2 Home â€” Today
- ã‚»ã‚¯ã‚·ãƒ§ãƒ³: Top3ã‚«ãƒ¼ãƒ‰ï¼ˆå„ªå…ˆåº¦ç‚¹ãƒ»è¦‹ç©ã‚‚ã‚Šãƒ»æœŸé™ï¼‰ã€é€²æ—ãƒªãƒ³ã‚°ï¼ˆä»Šæ—¥ã®é›†ä¸­åˆ†ï¼‰ã€ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆStart Focus / AIã§ä¸¦ã¹æ›¿ãˆ / å»¶æœŸï¼‰ã€‚
- ç©ºçŠ¶æ…‹: ã€Œã¾ãš5åˆ†ã ã‘å§‹ã‚ã‚ˆã†ã€ãƒœã‚¿ãƒ³ã€‚
- ã‚¨ãƒ©ãƒ¼: ãƒãƒƒãƒˆä¸é€šâ†’ãƒ­ãƒ¼ã‚«ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§è¡¨ç¤ºã€‚ã€ŒåŒæœŸä¿ç•™ã€ãƒˆãƒ¼ã‚¹ãƒˆã€‚

### 5.3 Add/Edit Task
- ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰: ã‚¿ã‚¤ãƒˆãƒ«ã€ãƒ¡ãƒ¢ã€æœŸé™ã€è¦‹ç©ï¼ˆåˆ†ï¼‰ã€å„ªå…ˆåº¦ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ï¼ˆLow/Med/Highï¼‰ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€‚
- æ©Ÿèƒ½: **AIã§åˆ†å‰²**â†’ Subtaskï¼ˆ3â€“5ä»¶ï¼‰ç”Ÿæˆã€ä¸¦ã¹æ›¿ãˆ/å‰Šé™¤å¯èƒ½ã€‚
- æ¤œè¨¼: ã‚¿ã‚¤ãƒˆãƒ«å¿…é ˆã€è¦‹ç©ã¯0â€“600åˆ†ã€‚

### 5.4 Focus Mode
- ã‚¿ã‚¤ãƒãƒ¼ï¼ˆ25/50ã‚«ã‚¹ã‚¿ãƒ ï¼‰ã€æ®‹ã‚Šæ™‚é–“ã€**è©°ã¾ã£ãŸâ†’ãƒ’ãƒ³ãƒˆ**ã€BGMã€ã‚¹ã‚­ãƒƒãƒ—/å»¶é•·ã€‚
- ä¸­æ–­æ™‚: ã€Œä¸­æ–­ç†ç”±ã€ã‚·ãƒ§ãƒ¼ãƒˆã‚»ãƒ¬ã‚¯ãƒˆï¼ˆå‰²ã‚Šè¾¼ã¿/ä½ã‚¨ãƒ/é›£ã—ã™ãï¼‰ã€‚
- å®Œäº†æ™‚: æˆæœãƒãƒ¼ãƒˆå…¥åŠ›â†’Sessionä¿å­˜ã€‚

### 5.5 Calendar
- é€±/æ—¥ãƒ“ãƒ¥ãƒ¼ã€Taskã‚’ãƒ‰ãƒ©ãƒƒã‚°ã§æ™‚é–“ãƒ–ãƒ­ãƒƒã‚¯åŒ–ã€‚
- ç«¶åˆæ™‚ã¯é‡ãªã‚Šè­¦å‘Šã€ç‰‡æ–¹ã‚’ææ¡ˆç§»å‹•ã€‚

### 5.6 Stats & Streak
- æŒ‡æ¨™: é€£ç¶šæ—¥æ•°ã€Deepâ€‘workåˆè¨ˆã€æ›œæ—¥/æ™‚é–“å¸¯ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—ã€‚
- ã‚¤ãƒ³ã‚µã‚¤ãƒˆ: ã€Œç«æ›œ9â€“11ãŒã‚ãªãŸã®ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¿ã‚¤ãƒ ã€ãªã©ã®Nudgeã€‚

### 5.7 AI Coachï¼ˆãƒŸãƒ‹ãƒãƒ£ãƒƒãƒˆï¼‰
- ãƒ—ãƒªã‚»ãƒƒãƒˆ: ã€Œ45åˆ†è¨ˆç”»ã‚’ä½œã‚‹ã€ã€Œ5åˆ†ã§å§‹ã‚ã‚‹ã«ã¯ï¼Ÿã€
- ã‚»ãƒ¼ãƒ•ãƒ†ã‚£: åŒ»ç™‚/æ³•å¾‹/å±é™ºè¡Œç‚ºã¯å›é¿ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€‚

### 5.8 Settings
- é€šçŸ¥ï¼ˆæ™‚é–“ãƒ»é »åº¦ï¼‰ã€è¨€èªï¼ˆja/vi/enï¼‰ã€ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼ˆJSON/CSVï¼‰ã€‚

---

## 6. UX/UI ãƒ‡ã‚¶ã‚¤ãƒ³æ¨™æº–ï¼ˆè©³ç´°ï¼‰
> ç›®æ¨™: ä¸€è²«æ€§ãƒ»å¯èª­æ€§ãƒ»**æœ€åˆã®ä¸€æ­©**ã‚’æŠ¼ã—å‡ºã™ã€‚WCAG 2.2 AAæº–æ‹ ã€‚

### 6.1 ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆDesign Tokensï¼‰
- **Colorï¼ˆLightï¼‰**
  - Primary: `#2E7D32`ï¼ˆGreen 700ï¼‰ / Hover `#256628` / Pressed `#1F5622`
  - Accent: `#0077CC`ï¼ˆæƒ…å ±ï¼‰ / Warning: `#F59E0B` / Danger: `#DC2626`
  - Text: `#0F172A` / Muted: `#475569` / Line: `#E2E8F0` / BG: `#F8FAFC` / Panel: `#FFFFFF`
- **Colorï¼ˆDarkï¼‰**
  - BG: `#0B1220` / Panel: `#111827` / Text: `#E5E7EB` / Line: `#1F2937`
  - Primary: `#34D399`ï¼ˆGreen 400ç›¸å½“ã€æš—æ‰€ã§è¦–èªæ€§ï¼‰
- **Typography**
  - æ—¥æœ¬èª: Noto Sans JPï¼ˆ400/500/700ï¼‰/ è‹±æ•°å­—: Interï¼ˆ400/600/700ï¼‰
  - Scale: 12/14/16/18/20/24/32ï¼ˆBody=16ï¼‰
- **Spacing**: 4ã®å€æ•°ï¼ˆ4/8/12/16/24/32ï¼‰
- **Radius**: 16ï¼ˆã‚«ãƒ¼ãƒ‰ï¼‰/ 24ï¼ˆä¸»è¦CTAï¼‰
- **Shadow**: Softâ€mediumï¼ˆelevation 2â€“6ï¼‰
- **Icon**: Lucideã‚¢ã‚¤ã‚³ãƒ³ã‚»ãƒƒãƒˆ

### 6.2 ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¦ç´„
- **Buttons**: Primaryï¼ˆå¡—ã‚Šï¼‰/ Secondaryï¼ˆç·šï¼‰/ Tertiaryï¼ˆãƒ†ã‚­ã‚¹ãƒˆï¼‰ã€‚æœ€å°ã‚¿ãƒƒãƒ—é ˜åŸŸ 44Ã—44ã€‚
- **Cards**: ã‚¿ã‚¤ãƒˆãƒ« + ãƒ¡ã‚¿ï¼ˆestimate/due/priorityï¼‰+ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆStart/Breakdownï¼‰ã€‚
- **Checklist**: ã‚¹ãƒ¯ã‚¤ãƒ—ã§å®Œäº†ã€é•·æŠ¼ã—ã§ä¸¦ã¹æ›¿ãˆã€‚
- **Progress Ring**: æ—¥/é€±é€²æ—ã‚’ç¤ºã™ã€‚ã‚¢ãƒ‹ãƒ¡ã¯200â€“400msã€‚
- **Timer**: å¤§ããªæ®‹ã‚Šæ™‚é–“ + å°ã•ãªæ“ä½œç¾¤ï¼ˆSkip/Extend/Hintï¼‰ã€‚
- **Toast/Sheet**: æˆåŠŸ2sã€è‡ªå‹•æ¶ˆæ»…ã€‚ã‚¨ãƒ©ãƒ¼ã¯æ˜ç¤ºçš„é–‰ã˜ã‚‹ã€‚
- **Empty State**: ã‚¤ãƒ©ã‚¹ãƒˆ + ã€Œ5åˆ†ã ã‘å§‹ã‚ã‚ˆã†ã€ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€‚

### 6.3 ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³/ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³
- é·ç§»200â€“300msã€è‡ªç„¶ãªã‚¤ãƒ¼ã‚¸ãƒ³ã‚°ï¼ˆcubicâ€‘bezier(0.2,0,0,1)ï¼‰ã€‚
- é‡è¦ãªçŠ¶æ…‹å¤‰åŒ–ï¼ˆé–‹å§‹/å®Œäº†ï¼‰ã¯è»½ã„è§¦è¦šï¼ˆiOS: success/impactï¼‰ã€‚

### 6.4 ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£
- ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”: æ–‡å­— 4.5:1ä»¥ä¸Šã€‚
- ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¯è¦–ã€VoiceOver/TalkBackãƒ©ãƒ™ãƒ«ã€‚
- ã‚¿ãƒƒãƒ—é ˜åŸŸ â‰¥ 44pxã€‚
- é…è‰²ã ã‘ã«ä¾å­˜ã›ãšã€ã‚¢ã‚¤ã‚³ãƒ³/ãƒ†ã‚­ã‚¹ãƒˆä½µç”¨ã€‚

### 6.5 ã‚³ãƒ”ãƒ¼/ãƒã‚¤ã‚¯ãƒ­æ–‡è¨€
- è¡Œå‹•èª˜å°: ã€Œã¾ãš5åˆ†ã ã‘ã€/ã€Œå°ã•ãå§‹ã‚ã‚‹ã€ã€‚
- ã‚¨ãƒ©ãƒ¼: è¡Œå‹•å¯èƒ½ãªææ¡ˆè¾¼ã¿ï¼ˆä¾‹: ãƒãƒƒãƒˆä¸é€šâ†’ã€Œå†è©¦è¡Œ/ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ç¶šè¡Œã€ï¼‰ã€‚

### 6.6 i18n
- ja/vi/enã€‚æ—¥æ™‚/æ•°å€¤/è¤‡æ•°å½¢å¯¾å¿œã€‚å³ä¸Šã«åˆ‡æ›¿ã€‚åˆå›ã¯OSè¨€èªã€‚

---

## 7. æƒ…å ±è¨­è¨ˆï¼ˆIAï¼‰
- Bottom Tabs: **Home / Calendar / Stats / Coach / Settings**
- FABï¼ˆHomeï¼‰: **Start Focus**

---

## 8. ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ
```
Flutterï¼ˆãƒ¢ãƒã‚¤ãƒ«ï¼‰
   â†“ REST/JSON + HTTPSï¼ˆHTTP/2ï¼‰
Laravel 12ï¼ˆAPIï¼‰ â€” PHP 8.3 â€” Nginx â€” Docker
   â”œ MySQL 8ï¼ˆRDSç­‰ï¼‰
   â”œ Redisï¼ˆQueue/Cache/RateLimitï¼‰
   â”œ Horizonï¼ˆã‚¸ãƒ§ãƒ–ç›£è¦–ï¼‰
   â”œ Sanctumï¼ˆãƒ¢ãƒã‚¤ãƒ«Tokenèªè¨¼ï¼‰
   â”” Telescopeï¼ˆé–‹ç™ºæ™‚ï¼‰
å¤–éƒ¨: FCMï¼ˆPushï¼‰/ OpenAIç­‰LLM / Google Calendar
```

---

## 9. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰è¨­è¨ˆï¼ˆLaravel 12ï¼‰
### 9.1 æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- PHP 8.3 / Laravel 12.x
- ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸: **laravel/sanctum**, laravel/horizon, fruitcake/cors, laravel/scoutï¼ˆä»»æ„ï¼‰, spatie/laravel-permissionï¼ˆå°†æ¥ï¼‰
- å“è³ª: PHPStanï¼ˆlevel 6ï¼‰ã€Pintã€Pest or PHPUnitã€OpenAPIç”Ÿæˆï¼ˆ`darkaonline/l5-swagger` ç­‰ï¼‰

### 9.2 èªè¨¼/æ¨©é™
- ãƒ¢ãƒã‚¤ãƒ«: Sanctumã®Personal Access Tokenï¼ˆç«¯æœ«åˆ¥ã«ç™ºè¡Œï¼‰ã€‚
- 2FAï¼ˆå°†æ¥ï¼‰ã€‚

### 9.3 ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ï¼ˆERDï¼‰
- **users**(id, name, email, password_hash, locale, timezone, created_at)
- **projects**(id, user_id, name, color)
- **tasks**(id, user_id, project_id?, title, note, due_at?, estimate_min?, priority[1â€“5], energy[low/med/high], status[pending/doing/done], created_at, updated_at)
- **subtasks**(id, task_id, title, order, done)
- **sessions**(id, user_id, task_id?, start_at, duration_min, outcome[done/skip/interrupted], notes)
- **nudges**(id, user_id, message, context, created_at)
- **ai_summaries**(id, user_id, day, highlights JSON, blockers JSON, plan JSON)
- **push_tokens**(id, user_id, platform, token)
- **integrations**(id, user_id, provider[google_calendar], access_token(enc), refresh_token(enc), scope, synced_at)
- **attachments**(id, task_id, url, mime)
- ä¸»è¦ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹: tasks(user_id, status, due_at), sessions(user_id, start_at)

### 9.4 APIè¨­è¨ˆï¼ˆREST, JSON, OpenAPI 3.1ï¼‰
**å…±é€š**
- èªè¨¼: `Authorization: Bearer <token>`ï¼ˆSanctumï¼‰
- ã‚¨ãƒ©ãƒ¼ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆä¾‹ï¼‰:
```json
{"error": {"code": "VALIDATION_ERROR", "message": "title is required", "fields": {"title": ["required"]}}}
```

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆæŠœç²‹ï¼‰**
- `POST /auth/register` / `POST /auth/login` / `POST /auth/logout`
- `GET /me`ï¼ˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ï¼‰
- `GET /tasks?status=&due_before=&q=` / `POST /tasks` / `GET /tasks/{id}` / `PATCH /tasks/{id}` / `DELETE /tasks/{id}`
- `POST /tasks/{id}/subtasks` / `PATCH /subtasks/{id}` / `DELETE /subtasks/{id}`
- `POST /sessions/start` / `POST /sessions/stop` / `GET /sessions?from=&to=`
- `GET /stats/weekly` / `GET /stats/monthly`
- `POST /push/register`ï¼ˆFCMãƒˆãƒ¼ã‚¯ãƒ³ï¼‰
- `POST /calendar/sync`ï¼ˆGoogle OAuthå¾Œã®pull oneâ€‘wayï¼‰

**AIç³»**
- `POST /ai/breakdown` â†’ å…¥åŠ›: `{ "title": "Há»c Java 2h", "context": {"level": "beginner"} }`
  - å‡ºåŠ›: `{ "subtasks": [{"title":"ç’°å¢ƒæº–å‚™(10m)"}, {"title":"åŸºç¤å¾©ç¿’(20m)"}, ...] }`
- `POST /ai/plan-today` â†’ å…¥åŠ›: `{ "tasks": [...], "energy": "low", "calendar": [...] }`
  - å‡ºåŠ›: `{ "top3": [...], "blocks": [{"taskId":1, "start":"09:00", "end":"09:30"}] }`
- `POST /ai/nudge` â†’ å…¥åŠ›: `{ "state": {"reason":"procrastination", "time":"evening"} }`
- `POST /ai/review` â†’ PMãƒ¬ãƒ“ãƒ¥ãƒ¼è¦ç´„

**ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ä¾‹ï¼ˆLaravel Ruleï¼‰**
- title: `required|string|max:120`
- estimate_min: `nullable|integer|min:0|max:600`
- due_at: `nullable|date|after:now`

**Etag/ã‚­ãƒ£ãƒƒã‚·ãƒ¥**
- `GET`ç³»ã¯`ETag/If-None-Match`å¯¾å¿œã€ãƒªã‚¹ãƒˆã¯`updated_at`é™é † + ã‚«ãƒ¼ã‚½ãƒ«ãƒšãƒ¼ã‚¸ãƒ³ã‚°ã€‚

### 9.5 AIé€£æº
- ãƒ—ãƒ­ãƒã‚¤ãƒ€: OpenAIç­‰ï¼ˆã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰å‘¼ã³å‡ºã—ï¼‰ã€‚
- **é–¢æ•°å‘¼ã³å‡ºã—ï¼ˆfunction callingï¼‰**: `create_subtasks`, `schedule_today`, `suggest_nudge`ã€‚
- ã‚»ãƒ¼ãƒ•ãƒ†ã‚£: å±é™ºè¡Œç‚ºã‚„åŒ»ç™‚/æ³•å‹™ã®åŠ©è¨€ã¯**å›é¿+ä¸€èˆ¬æƒ…å ±**ã«ç•™ã‚ã‚‹ã€‚
- ã‚³ã‚¹ãƒˆæœ€é©åŒ–: ãƒ¬ã‚¹ãƒãƒ³ã‚¹è¦ç´„ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã€æ¸©åº¦/æœ€å¤§ãƒˆãƒ¼ã‚¯ãƒ³åˆ¶å¾¡ã€ãƒãƒƒãƒåŒ–ã€‚

### 9.6 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£/ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼
- HTTPSå¿…é ˆã€HSTSã€CORSåˆ¶é™ï¼ˆãƒ¢ãƒã‚¤ãƒ«Originã®ã¿ï¼‰ã€‚
- PIIã¯æœ€å°åé›†ã€‚AIã¸é€ã‚‹æ–‡è„ˆã¯**å¿…è¦æœ€å°é™**ã«ãƒã‚¹ã‚¯ã€‚
- ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³æš—å·åŒ–ï¼ˆMySQL atâ€‘rest + AESâ€256ï¼‰ã€.envã§KMSç®¡ç†ã€‚
- ç›£æŸ»ãƒ­ã‚°ï¼ˆé‡è¦æ“ä½œ: å‰Šé™¤/ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼‰ã€‚
- ãƒ¬ãƒ¼ãƒˆåˆ¶é™: èªè¨¼å¤–(10/min/IP)ã€èªè¨¼æ¸ˆ(120/min/token)ã€‚

### 9.7 å¯è¦³æ¸¬æ€§
- æ§‹é€ åŒ–ãƒ­ã‚°(JSON)ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆIDã€é‡è¦æŒ‡æ¨™: p95å¿œç­”<300msã€ã‚¨ãƒ©ãƒ¼ç‡<1%ã€‚
- Horizonã§ã‚­ãƒ¥ãƒ¼ç›£è¦–ã€å¤±æ•—ã‚¸ãƒ§ãƒ–å†è©¦è¡Œï¼ˆä¸Šé™3ï¼‰ã€‚

### 9.8 ã‚ªãƒ•ãƒ©ã‚¤ãƒ³/åŒæœŸ
- ãƒ¢ãƒã‚¤ãƒ«å´ãƒ­ãƒ¼ã‚«ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆHive/SQLiteï¼‰ã€‚
- ç«¶åˆ: `updated_at`æ¯”è¼ƒ + ã‚µãƒ¼ãƒå„ªå…ˆã€å·®åˆ†ãƒãƒ¼ã‚¸æˆ¦ç•¥ï¼ˆãƒ¡ãƒ¢ã¯CRDTå°†æ¥ï¼‰ã€‚

---

## 10. éæ©Ÿèƒ½è¦ä»¶
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹: API p95 < 300msã€TTFB < 200msã€‚
- å¯ç”¨æ€§: 99.9%ï¼ˆæ™‚é–“å¤–ãƒ¡ãƒ³ãƒ†é™¤ãï¼‰ã€‚
- ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£: Horizon + Redisã‚¹ã‚±ãƒ¼ãƒ«ã€èª­ã¿å–ã‚Šã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥å„ªå…ˆã€‚
- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—: DBæ—¥æ¬¡ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã€30æ—¥ä¿æŒã€‚

---

## 11. ã‚¤ãƒ³ãƒ•ãƒ©/DevOps
- Docker Composeï¼ˆlocalï¼‰/ IaCï¼ˆTerraform: VPC, RDS, ElastiCacheç›¸å½“ï¼‰
- ç’°å¢ƒ: dev / staging / prodï¼ˆåˆ¥VPCï¼‰
- CI/CD: GitHub Actions
  - Lint/PHPStan/Pest â†’ ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³dryâ€run â†’ ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆBlueâ€‘Greenï¼‰
- ç’°å¢ƒå¤‰æ•°ï¼ˆä¾‹ï¼‰
```
APP_ENV=production
APP_KEY=base64:...
DB_DATABASE=todo
DB_USERNAME=...
DB_PASSWORD=...
REDIS_HOST=...
SANCTUM_STATEFUL_DOMAINS=
AI_PROVIDER=openai
OPENAI_API_KEY=...
FCM_SERVER_KEY=...
GOOGLE_CLIENT_ID=...
GOOGLE_CLIENT_SECRET=...
```

---

## 12. ãƒ†ã‚¹ãƒˆè¨ˆç”»
- Unit: ãƒ¢ãƒ‡ãƒ«/ã‚µãƒ¼ãƒ“ã‚¹/ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆPestï¼‰
- Feature: èªè¨¼ã€Task CRUDã€AIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆstub
- E2Eï¼ˆå°†æ¥ï¼‰: Flutterçµ±åˆãƒ†ã‚¹ãƒˆï¼ˆã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ç”»åƒå«ã‚€ï¼‰
- ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£: ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆ/ãƒ•ã‚©ãƒ¼ã‚«ã‚¹/VoiceOverãƒã‚§ãƒƒã‚¯é …ç›®
- è² è·: k6ã§RPS 100ã§ã‚‚p95<300msç¢ºèª

---

## 13. å—ã‘å…¥ã‚ŒåŸºæº–ï¼ˆä¾‹ï¼‰
- **AIåˆ†å‰²**: ã‚¿ã‚¤ãƒˆãƒ«ã®ã¿å…¥åŠ›â†’å¹³å‡3â€“5ä»¶ã®SubtaskãŒç”Ÿæˆã•ã‚Œã€ç·¨é›†ã§ãã‚‹ã€‚
- **Start Focus**: Homeã‹ã‚‰2ã‚¿ãƒƒãƒ—ä»¥å†…ã§ã‚¿ã‚¤ãƒãƒ¼é–‹å§‹ã€‚
- **Today Top3**: æœã®ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³å¾Œã€Top3ãŒè¡¨ç¤ºã•ã‚Œã€1ä»¶é¸æŠã§Focusé–‹å§‹ã§ãã‚‹ã€‚
- **ã‚ªãƒ•ãƒ©ã‚¤ãƒ³**: æ©Ÿå†…ãƒ¢ãƒ¼ãƒ‰ã§ã‚‚Home/Taskä¸€è¦§ã‚’é–²è¦§ã§ãã€å¾©å¸°ã§è‡ªå‹•åŒæœŸã€‚

---

## 14. ãƒªã‚¹ã‚¯ã¨å¯¾ç­–
- **AIå“è³ªã°ã‚‰ã¤ã**: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ + ãƒ«ãƒ¼ãƒ«è£œæ­£ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã§æ”¹å–„ã€‚
- **å…ˆå»¶ã°ã—å†ç™º**: 5åˆ†é–‹å§‹ã®å¼·åŒ–ã€è©°ã¾ã‚Šæ™‚ã®**60ç§’ãƒ’ãƒ³ãƒˆ**ã‚’å¸¸è¨­ã€‚
- **é€šçŸ¥ç–²ã‚Œ**: è‡ªå‹•æœ€é©åŒ–ï¼ˆåå¿œç‡ä½ä¸‹æ™‚ã¯é »åº¦ã‚’ä¸‹ã’ã‚‹ï¼‰ã€‚

---

## 15. ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ï¼ˆ2é€±é–“MVPï¼‰
- W1: èªè¨¼ / Task CRUD / Focus / AIåˆ†å‰² / ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³
- W2: Calendar / Stats / Nudge / PMãƒ¬ãƒ“ãƒ¥ãƒ¼ / ä»•ä¸Šã’ & ãƒªãƒªãƒ¼ã‚¹

---

## ä»˜éŒ²A: ç”»é¢UIä»•æ§˜ï¼ˆéƒ¨å“ãƒ¬ãƒ™ãƒ«ï¼‰
- **Task Card**: å·¦è‰²ãƒ‰ãƒƒãƒˆï¼ˆpriorityï¼‰ã€ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆ1è¡Œçœç•¥ï¼‰ã€ãƒ¡ã‚¿ï¼ˆâ±estimateãƒ»ğŸ“…dueï¼‰ã€‚å³ç«¯ã«Start/Moreã€‚
- **Timer**: æ•°å­—ã¯32ptãƒ»ç­‰å¹…ã€‚ä¼‘æ†©ã¯ç·‘æ ã€ä½œæ¥­ã¯ä¸»è‰²å¡—ã‚Šã€‚
- **Modal: è©°ã¾ã£ãŸ**: 3æŠï¼ˆç´°åˆ†åŒ–/é›£æ˜“åº¦ä¸‹ã’ã‚‹/å»¶é•·ï¼‰+ å…·ä½“ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ç”Ÿæˆã€‚

## ä»˜éŒ²B: APIãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ä¾‹
```json
// POST /tasks
{"title":"Javaå­¦ç¿’","estimate_min":60,"priority":3,"energy":"med"}
// 201 Created â†’
{"id":123,"title":"Javaå­¦ç¿’","status":"pending"}
```

## ä»˜éŒ²C: iOS/Androidã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³å·®ç•°
- æˆ»ã‚‹ãƒŠãƒ“ã®ä½ç½®ã€ã‚·ãƒ¼ãƒˆã®é«˜ã•ã€è§¦è¦šå¼·åº¦ã‚’OSåˆ¥ã«æœ€é©åŒ–ã€‚

---

### æ³¨è¨˜
- æœ¬æ›¸ã¯**å€‹äººåˆ©ç”¨ä¸­å¿ƒ**ã«æœ€é©åŒ–ã€‚å°†æ¥ã®ã‚³ãƒ©ãƒœæ©Ÿèƒ½ã¯åˆ¥ç« ã§æ‹¡å¼µã€‚
- Laravel 12ã‚’å‰æã«ã—ã¤ã¤ã€ãƒã‚¤ãƒŠãƒ¼å·®åˆ†ã¯å®Ÿè£…æ™‚ã«è£œæ­£ã€‚

